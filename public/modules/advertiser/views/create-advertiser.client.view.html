<h3>New Advertiser
	<ul class="breadcrumb">
	  <li><a ui-sref="app.home">Home</a>
	  </li>
	  <li ng-repeat="state in $state.$current.path" ng-switch="$last" ng-if="!state.abstract" ng-class="{active: $last}"><a ng-switch-when="false" href="#{{state.url.format($stateParams)}}">{{state.title}}</a>
	     <span ng-switch-when="true">{{state.title}}</span>
	  </li>
	</ul>
</h3>

<section data-ng-controller="AdvertiserWizardController">
    <div class="panel panel-default">
        <!--DEBUGGING-->
        <!--<div class="panel-heading">Start Date = {{ campaign.start_date }}, End date = {{ campaign.end_date }}</div>-->
        <div class="panel-body">
            <form name="advertiserForm" data-ng-submit="" form-wizard="" validate-steps="true" validate-form="" steps="6">
                <div class="form-wizard wizard-vertical">
                    <!-- START wizard steps indicator-->
                    <ol>
                        <li ng-class="{'active':wizard.active(1)}" ng-click="wizard.go(1)">
                            <h4>1. Advertiser</h4>
                            <small class="text-muted"></small>
                        </li>
                        <li ng-class="{'active':wizard.active(2)}" ng-click="wizard.go(2)">
                            <h4>2. Campaign Basics</h4>
                            <small class="text-muted"></small>
                        </li>
                        <li ng-class="{'active':wizard.active(3)}" ng-click="wizard.go(3)">
                            <h4>3. Choose a Clique</h4>
                            <small class="text-muted"></small>
                        </li>
                        <li ng-class="{'active':wizard.active(4)}" ng-click="wizard.go(4)">
                            <h4>4. Targeting Details</h4>
                            <small class="text-muted"></small>
                        </li>
                        <li ng-class="{'active':wizard.active(5)}" ng-click="wizard.go(5)">
                            <h4>5. Creatives</h4>
                            <small class="text-muted"></small>
                        </li>
                        <li ng-class="{'active':wizard.active(6)}" ng-click="wizard.go(6)">
                            <h4>6. Review & Submit</h4>
                            <small class="text-muted"></small>
                        </li>
                    </ol>
                    <!-- END wizard steps indicator-->

                    <!-- START Advertiser inputs -->
                    <div id="step1" ng-show="wizard.active(1)">
                        <fieldset>
                            <legend>Basic advertiser info</legend>
                            <div class="form-group">
                                <label>Name *</label>
                                <div class="controls">
                                    <input name="name" type="text" data-ng-model="name" id="name" data-parsley-group="step1" class="form-control" placeholder="Name" required="required">
                                    <!--<span ng-show="validateInput('name', 'required')" class="text-danger">This field is required</span>-->
                                </div>
                            </div>
                            <br/>
                            <div class="form-group">
                                <label>Website *</label>
                                <div class="controls">
                                    <input name="website" type="url" data-ng-model="website" id="website" data-parsley-group="step1" class="form-control" placeholder="http://www.example.com" required="required">
                                    <!--<span ng-show="validateInput('website', 'url')" class="text-danger ng-hide">This field must be a valid url</span>-->
                                </div>
                            </div>
                            <br/>
                            <div class="form-group">
                                <label>Description</label>
                                <div class="controls">
                                    <input name="description" type="text" data-ng-model="description" id="description" data-parsley-group="step1" class="form-control" placeholder="Optional - Brief Description of this Advertiser">
                                </div>
                            </div>
                        </fieldset>
                        <small class="text-muted">* Required</small>
                        <ul class="pager">
                            <li class="next"><a href="#" ng-click="wizard.go(2)">Next <span>&rarr;</span></a>
                            </li>
                        </ul>
                    </div>
                    <!-- END Advertiser Step inputs -->

                    <!-- START CAMPAIGN inputs -->
                    <div id="step2" ng-show="wizard.active(2)">
                        <legend>Tell us about your first campaign.</legend>
                        <fieldset>
                            <div class="form-group">
                                <label>Name *</label>
                                <input type="text" name="campaign.name" id="campaign.name" data-ng-model="campaign.name" data-parsley-group="step2" placeholder="Backcountry Stand-Up Fat-Biking Winter 2016" required="required" class="form-control" />
                            </div>
                            <br/>
                            <div class="form-group">
                                <label>Description</label>
                                <input type="text" name="campaign.description" id="campaign.description" data-ng-model="campaign.description" data-parsley-group="step2" placeholder="Optional - describe your campaign" class="form-control" />
                            </div>
                        </fieldset>
                        <fieldset>
                            <label>Budget *</label>
                            &nbsp;&nbsp;&nbsp;
                            <a href="#" tooltip="Tell us how much money you would like to spend over the lifetime of this campaign. &#013;&#013; Don't worry, our bidders will pace your budget evenly over the lifetime of the campaign (set below)">
                                <em class="fa fa-question-circle"></em>
                            </a>
                            <div class="input-group">
                                <span class="input-group-addon">$</span>
                                <input type="number" data-parsley-type="integer" name="campaign.budget" id="campaign.budget" data-ng-model="campaign.budget" data-parsley-group="step2" placeholder="10000" class="form-control" required="required"/>
                                <span class="input-group-addon">.00</span>
                            </div>
                        </fieldset>
                        <!--Start Flight Dates Row-->
                        <fieldset>
                            <div class="row">
                                <div class="col-md-6">
                                    <label>Start Date *</label>
                                    &nbsp;&nbsp;&nbsp;
                                    <a href="#" tooltip="What day do you want your campaign to start?">
                                        <em class="fa fa-question-circle"></em>
                                    </a>
                                    <div class="input-group">
                                        <input type="text" name="campaign.start_date" id="campaign.start_date" data-ng-model="campaign.start_date" is-open="calendar.opened.start_date" datepicker-popup="yyyy-MM-dd" data-parsley-group="step2" min-date="calendar.today" placeholder="yyyy-MM-dd" datepicker-options="calendar.dateOptions" class="form-control" required="required" close-text="Close"/>
                                        <!--<input type="date" name="campaign_start_date" id="campaign_start_date" ng-model="campaign.start_date" data-parsley-group="step2" min="{{ today | date: 'yyyy-MM-dd' }}" data-parsley-min="" class="form-control" required="required"/>-->
                                        <!--Button to enable popup Angular UI datepicker-->
                                        <span class="input-group-btn">
                                             <button type="button" ng-click="calendar.open($event,'start_date')" class="btn btn-default">
                                                 <em class="fa fa-calendar"></em>
                                             </button>
                                        </span>
                                    </div>
                                    <!--<span ng-show="validateInput('campaign.budget', 'number')" class="text-danger ng-hide">This field must be a valid number</span>-->
                                </div>
                                <div class="col-md-6">
                                    <label>End Date *</label>
                                    &nbsp;&nbsp;&nbsp;
                                    <a href="#" tooltip="What day do you want your campaign to end?">
                                        <em class="fa fa-question-circle"></em>
                                    </a>
                                    <div class="input-group">
                                        <input type="text" name="campaign.end_date" id="campaign.end_date" data-ng-model="campaign.end_date" is-open="calendar.opened.end_date" datepicker-popup="yyyy-MM-dd" data-parsley-group="step2" min-date="campaign.start_date" placeholder="yyyy-MM-dd" datepicker-options="dateOptions" class="form-control" required="required" close-text="Close"/>
                                        <!--<input type="date" name="campaign.end_date" id="campaign.end_date" ng-model="campaign.end_date" data-parsley-group="step2" data-parsley-min="" min="{{ campaign.start_date | date: 'yyyy-MM-dd' }}" class="form-control" required="required"/>-->
                                        <!--Button to enable popup Angular UI datepicker-->
                                        <span class="input-group-btn">
                                            <button type="button" ng-click="calendar.open($event, 'end_date')" class="btn btn-default">
                                                <em class="fa fa-calendar"></em>
                                            </button>
                                        </span>
                                    </div>
                                    <!--<span ng-show="validateInput('campaign.budget', 'number')" class="text-danger ng-hide">This field must be a valid number</span>-->
                                </div>
                            </div>
                        </fieldset>
                        <small class="text-muted">* Required</small>
                        <ul class="pager">
                            <li class="previous">
                                <a href="#" ng-click="wizard.go(1)">
                                    <span>&larr; Previous</span>
                                </a>
                            </li>
                            <li class="next"><a href="#" ng-click="wizard.go(3)">Next <span>&rarr;</span></a>
                            </li>
                        </ul>
                    </div>

                    <div id="step3" ng-show="wizard.active(3)">
                        <legend>Choose the Clique that best describes your campaign</legend>
                        <fieldset>
                            <input style="display: None" type="text" name="campaign.clique" id="campaign.clique" data-ng-model="campaign.clique" data-parsley-group="step3" placeholder="{{ campaign.clique }}" required="required" class="form-control" />
                            <!--<p class="form-control-static">{{ campaign.clique }}</p>-->
                            <div class="form-group">
                                <abn-tree tree-data="cliques" tree-control="my_tree" on-select="set_clique(branch)" icon-leaf="fa fa-square" expand-level="2" initial-selection="Outdoor"></abn-tree>
                            </div>
                        </fieldset>
                        <div class="alert alert-success" data-ng-show="campaign.clique"><b>Selected:</b> {{ campaign.clique }}</div>
                        <small class="text-muted">* Required</small>
                        <ul class="pager">
                            <li class="previous">
                                <a href="#" ng-click="wizard.go(2)">
                                    <span>&larr; Previous</span>
                                </a>
                            </li>
                            <li class="next"><a href="#" ng-click="wizard.go(4)">Next <span>&rarr;</span></a>
                            </li>
                        </ul>
                    </div>

                    <!-- START CAMPAIGN inputs -->
                    <div id="step4" ng-show="wizard.active(4)">
                        <legend>Set your bids & targeting specifics</legend>
                        <!-- START row -->
                        <fieldset>
                            <label>Base Bid (CPM) *</label>
                            &nbsp;&nbsp;&nbsp;
                            <a href="#" tooltip="Your base bid is what you'd like your average bid to be for qualified impressions.&#013; &#013;CPM = Cost per Thousand Impressions">
                                <em class="fa fa-question-circle"></em>
                            </a>
                            <div class="input-group">
                                <span class="input-group-addon">$</span>
                                <input data-parsley-type="number" name="campaign.base_bid" id="campaign.base_bid" ng-model="campaign.base_bid" placeholder="10.00" data-parsley-group="step4" min="{{ min_base_bid }}" max="{{ max_base_bid }}" class="form-control" required="required"/>
                            </div>
                            <br/>
                            <label>Max Bid (CPM) *</label>
                            &nbsp;&nbsp;&nbsp;
                            <a href="#" tooltip="Your base bid is what you'd like your average bid to be for qualified impressions.&#013; &#013;CPM = Cost per Thousand Impressions">
                                <em class="fa fa-question-circle"></em>
                            </a>
                            <div class="input-group">
                                <span class="input-group-addon">$</span>
                                <input data-parsley-type="number" name="campaign.max_bid" id="campaign.max_bid" ng-model="campaign.max_bid" placeholder="10.00" data-parsley-group="step4" min="{{ campaign.base_bid }}" class="form-control" required="required"/>
                            </div>
                        </fieldset>

                        <!--BEGIN DMA slider controls-->
                        <fieldset>
                            <div class="row">
                                <div class="col-md-10">
                                    <div class="form-group">
                                        <label>DMAs</label>
                                        <select chosen="" multiple="multiple" name="campaign.dma_targets" id="dma_targets" ng-options="obj.name for obj in dmas" ng-model="campaign.dma_targets" placeholder="Select DMAs to target or block" data-parsley-group="step4" class="chosen-select form-control">
                                        </select>
                                    </div>
                                </div>
                                <!--BEGIN DMA table-->
                                <div class="col-md-10" data-ng-show="campaign.dma_targets">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>DMA</th>
                                                <th>Weighting</th>
                                                <th>Bid</th>
                                            </tr>
                                        </thead>
                                        <tbody data-ng-show="campaign.dma_targets">
                                            <tr ng-repeat="target in campaign.dma_targets">
                                                <td>{{ target.name}}</td>
                                                <td>
                                                    <slider ng-model="target.weight" min="0" max="10" step="0.5" value="1.5" orientation="horizontal" class="bs-slider slider-horizontal"></slider>
                                                </td>
                                                <td>{{ Math.min(target.weight * campaign.base_bid, campaign.max_bid) | currency : "$" : 2}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </fieldset>
                        <!--END DMA slider controls-->

                        <ul class="pager">
                            <li class="previous">
                                <a href="#" ng-click="wizard.go(3)">
                                    <span>&larr; Previous</span>
                                </a>
                            </li>
                            <li class="next"><a href="#" ng-click="wizard.go(5)">Next <span>&rarr;</span></a>
                            </li>
                        </ul>
                    </div>
                    <!-- END Wizard Step inputs -->

                    <!-- START CREATIVE UPLOAD STEP-->
                    <div id="step5" ng-show="wizard.active(5)">
                        <legend>Now add some creatives to your campaign</legend>
                        <fieldset>
                            <div class="col-md-12">
                                <div ng-show="creative_upload_error" class="alert alert-danger">{{ creative_upload_error }}</div>
                                <div class="row">
                                    <div nv-file-drop="" uploader="uploader">
                                        <div ng-show="uploader.isHTML5">
                                            <!-- 3. nv-file-over uploader="link" over-class="className"-->
                                            <div nv-file-over="" uploader="uploader" over-class="bg-info" class="box-placeholder my-drop-zone">Drag Creatives Here (Supported types: .png .jpeg .gif)</div>
                                            <!-- Example: nv-file-drop="" uploader="{Object}" options="{Object}" filters="{String}"-->
                                        </div>
                                        <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}"-->
                                        <input filestyle="" type="file" data-button-text="Or select from your files" data-class-button="btn btn-default" data-class-input="form-control inline" nv-file-select="" uploader="uploader" class="form-control" />
                                    </div>
                                </div>
                                <br/>
                                <div class="row" data-ng-show="uploader.queue.length">
                                    <p ng-if="uploader.queue.length" class="pull-right label label-info">Queue length: {{ uploader.queue.length }}</p>
                                    <p ng-if="!uploader.queue.length" class="lead text-center">No files in queue. Start adding some..</p>
                                    <div ng-if="uploader.queue.length">
                                        <table ng-if="uploader.queue.length" class="table">
                                            <thead>
                                            <tr>
                                                <th width="30%">Name</th>
                                                <th>Dimensions</th>
                                                <th ng-show="uploader.isHTML5">Size</th>
                                                <th>Click URL</th>
                                                <th>Actions</th>
                                                <th ng-show="uploader.isHTML5">Progress</th>
                                                <th>Status</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="item in uploader.queue">
                                                <td>
                                                    <strong>{{ item.file.name }}</strong>
                                                </td>
                                                <td>
                                                    {{ item.dimensions }}
                                                </td>
                                                <td ng-show="uploader.isHTML5" nowrap="">{{ item.file.size/1024|number:2 }} KB</td>
                                                <td>
                                                    <input name="website" type="url" data-ng-model="item.click_url" id="{{ item.file.name }}_clickurl" data-parsley-group="step5" class="form-control" placeholder="http://www.example.com" required="required">
                                                </td>
                                                <td nowrap="">
                                                    <!--<button type="button" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess" class="btn btn-info btn-xs">-->
                                                        <!--<span class="icon-cloud-upload mr"></span>Upload</button>-->
                                                    <!--<button type="button" ng-click="item.cancel()" ng-disabled="!item.isUploading" class="btn btn-warning btn-xs">-->
                                                        <!--<span class="icon-close mr"></span>Cancel</button>-->
                                                    <button type="button" ng-click="item.remove()" class="btn btn-danger btn-xs">
                                                        <span class="icon-trash mr"></span>Remove</button>
                                                </td>
                                                <td ng-show="uploader.isHTML5">
                                                    <div style="margin-bottom: 0;" class="progress progress-xs">
                                                        <div role="progressbar" ng-style="{ 'width': item.progress + '%' }" class="progress-bar"></div>
                                                    </div>
                                                </td>
                                                <td class="text-center">
                                                     <span ng-show="item.isSuccess">
                                                        <em class="fa fa-check fa-fw"></em>
                                                     </span>
                                                     <span ng-show="item.isCancel">
                                                        <em class="fa fa-ban-circle fa-fw"></em>
                                                     </span>
                                                     <span ng-show="item.isError">
                                                        <em class="fa fa-times fa-fw"></em>
                                                     </span>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div data-ng-show="uploader.progress">
                                        <p>Upload Progress:</p>
                                        <div style="" class="progress progress-xs">
                                            <div role="progressbar" ng-style="{ 'width': uploader.progress + '%' }" class="progress-bar"></div>
                                        </div>
                                    </div>
                                    <button type="button" ng-click="validateAndUpload(wizard.validateStep(5))" ng-disabled="!uploader.getNotUploadedItems().length" class="btn btn-info btn-s">
                                        <span class="icon-cloud-upload mr"></span>Upload all</button>
                                    <button type="button" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading" class="btn btn-warning btn-s">
                                        <span class="icon-close mr"></span>Cancel all</button>
                                    <button type="button" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length" class="btn btn-danger btn-s">
                                        <span class="icon-trash mr"></span>Remove all</button>
                                </div>
                            </div>
                        </fieldset>
                        <ul class="pager">
                            <li class="previous">
                                <a href="#" ng-click="wizard.go(4)">
                                    <span>&larr; Previous</span>
                                </a>
                            </li>
                            <li class="next" ng-show="uploads_completed">
                                <a href="#" ng-click="wizard.go(6)"> Next <span>&rarr;</span></a>
                            </li>
                        </ul>
                    </div>
                    <!-- END Wizard Step inputs -->

                    <!-- START Wizard Step inputs -->
                    <div id="step6" ng-show="wizard.active(6)">
                        <legend>Review your new advertiser</legend>
                        <div class="col-md-12">
                            <div ng-show="creation_error" class="alert alert-danger">{{ creation_error }}</div>
                        </div>
                        <div>
                            <!--JUST A PLACEHOLDER-->
                            <p>{{ campaign | json }}</p>
                        </div>
                        <ul class="pager">
                            <li class="previous">
                                <a href="#" ng-click="wizard.go(5)">
                                    <span>&larr; Previous</span>
                                </a>
                            </li>
                            <li ng-show="loading">
                                <div class="ball-pulse">
                                    <div></div>
                                    <div></div>
                                    <div></div>
                                </div>
                            </li>
                            <li class="next">
                                <a href="#" ng-click="create()"> Submit <span>&rarr;</span></a>
                            </li>
                        </ul>
                    </div>
                    <!-- END Wizard Step inputs -->
                </div>
            </form>
        </div>
    </div>
</section>