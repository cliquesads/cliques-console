<div class="topsavebar bg-primary-light" ng-show="dirty">
	<div class="text-center">
		<button type="button"
			class="btn btn-lg btn-primary"
			ng-click="save()"
			analytics-on="click"
			analytics-event="GeoTargeting_Save">
			Save	
		</button>
		<button type="button"
			class="btn btn-lg btn-default"
			ng-click="initializeBothTrees()"
			analytics-in="click"
			analytics-event="GeoTargeting_Reset">
			Reset	
		</button>
	</div>	
</div>

<!-- Action options to allow user to customize bidding for or block selected geo area -->
<div class="topsavebar bg-primary-light"
	ng-if="showingActionOptions">
	<div class="text-center text-muted">
		<span ng-if="selectedGeo.type === 'country'">
			For <strong>{{ selectedGeo.name }}</strong>, do you want to customize bidding or block?
		</span>
		<span ng-if="selectedGeo.type === 'region'">
			For <strong>{{ selectedGeo.name }}</strong> in <strong>{{selectedCountry.name}}</strong>, do you want to customize bidding or block?
		</span>
		<button type="button"
			class="btn btn-success btn-xs ml"
			ng-click="customizeBiddingForGeo()">
			<i class="fa fa-sliders"></i>
		</button>
		<button type="button"
			class="btn btn-danger btn-xs ml"
			ng-click="blockGeo()">
			<i class="fa fa-ban"></i>
		</button>
	</div>	
</div>

<!-- World map or country map(Currently supports world & USA only) -->
<div class="col-sm-12">
	<div class="panel">
		<div class="panel-heading">
			<h4>
				<i class="fa fa-sitemap"></i>&nbsp;&nbsp;Default Bidding
				<a class="fa fa-lg fa-question-circle pull-right"
					ng-click="getAllGeosHelp()"
					analytics-on="click"
					analytics-event="GeoTargeting_GetAllGeosHelp">
				</a>
			</h4>
			<em class="text-muted">
				Your base bide is set to <strong>{{ campaign.base_bid | currency : "$" : 2 }}</strong>, which means that you will bid <strong>{{ campaign.base_bid | currency : "$" : 2 }}</strong> for all geo targets in this map.
			</em>
		</div>
		<div class="panel-body">
			<!-- Map -->
			<datamap
				data-ng-if="mapAvailable"
				class="pb0"
				on-click="mapClicked"
				map="mapObject"
				plugins="mapPlugins"
				plugin-data="mapPluginData">
			</datamap>	

			<!-- Placeholder for non-USA users -->
			<div ng-if="!mapAvailable"
				class="text-center">
				<h3><i class="fa fa-lg fa-globe"></i> States map only available for United States</h3>	
				<p class="mb-lg">Stay tuned for updates!</p>
				<p class="mb-lg"><em>Have specific reporting needs that you'd like us to address in a future release? <a href="mailto:support@cliquesads.com">Contact us.</a></em></p>
			</div>

			<!-- Button to reload world map -->
			<div class="pull-right"
				ng-if="mapObject.scope !== 'world'">
				<button class="btn btn-default"
					ng-click="reloadWorldMap()">
					Back to world map
				</button>
			</div>
		</div>
	</div>
</div>
<!-- End of map section -->

<!-- Geo targets tree section -->
<div class="col-sm-6">
	<div class="panel">
		<div class="panel-heading bg-success">
			<h4>
				<i class="fa fa-sliders"></i> Custom Bidding
			</h4>
		</div>
		<div class="panel-body">
			<tree-expand-toggle-buttons control="geo_targets.control"
				ng-show="geo_targets.data">
			</tree-expand-toggle-buttons>
			<!-- Search box -->
			<!-- After found search result, the geo tree should scroll down to the search result element, and that element should have different background color -->
			<div class="input-group mt">
				<input type="text" class="form-control" placeholder="Search for Country/Region/City" ng-model="geoTreeSearchKeyword">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button" ng-click="searchTargetsTree()" ng-disabled="!geoTreeSearchKeyword">
						<i class="fa fa-search"></i>
					</button>
				</span>
			</div>
			<tree-dnd template-url="modules/advertiser/views/partials/geos-tree-table-dnd.html"
				tree-data="geo_targets.data"
				tree-control="geo_targets.control"
				column-defs="geo_targets.columns"
				expand-on="geo_targets.expanding_property"
				primary-key="_id"
				enable-drag="false"
				enable-drop="true"
				enable-move="false"
				icon-leaf="fa fa-lg fa-tags"
                icon-expand="fa fa-lg fa-minus"
                icon-collapse="fa fa-lg fa-plus-circle"
                data-indent="15"
                data-indent-unit="px">
			</tree-dnd>
		</div>
	</div>
</div>
<!-- End of geo targets tree section -->

<!-- Blocked geos tree section -->
<div class="col-sm-6">
	<div class="panel">
		<div class="panel-heading bg-danger">
			<h4><i class="fa fa-ban"></i> Blocked</h4>
		</div>
		<div class="panel-body">
			<tree-expand-toggle-buttons control="blocked_geos.control"
				ng-show="blocked_geos.data">
			</tree-expand-toggle-buttons>
			<!-- Search box for blocked geo tree -->
			<div class="input-group mt">
				<input type="text" class="form-control" placeholder="Search for Country/Region/City" ng-model="blockedTreeSearchKeyword">
				<span class="input-group-btn">
					<button class="btn btn-default" type="button" ng-click="searchBlockedTree()" ng-disabled="!blockedTreeSearchKeyword">
						<i class="fa fa-search"></i>
					</button>
				</span>
			</div>
			<tree-dnd
				template-url="modules/advertiser/views/partials/geos-tree-table-dnd.html"
				tree-data="blocked_geos.data"
				tree-control="blocked_geos.control"
				column-defs="blocked_geos.columns"
				expand-on="blocked_geos.expanding_property"
				primary-key="_id"
				enable-drag="false"
				enable-drop="true"
				enable-move="false"
				icon-leaf="fa fa-lg fa-tags"
                icon-expand="fa fa-lg fa-minus"
                icon-collapse="fa fa-lg fa-plus-circle"
                data-indent="15"
                data-indent-unit="px">
			</tree-dnd>
		</div>
	</div>
</div>
<!-- End of blocked geos tree section -->